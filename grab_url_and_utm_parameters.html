<script type="text/javascript">
// Get the URL cookie
function getCookie(name)
  {
    var re = new RegExp(name + "=([^;]+)");
    var value = re.exec(document.cookie);
    return (value != null) ? unescape(value[1]) : null;
  }
// Parse UTM parameter from URL
function getParameterByName(name, url) {
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
// Assign UTM parameters to form values
function retreiveUTM(){
    var url = getCookie('__gtm_campaign_url');
    var source = getParameterByName('utm_source', url);
    var medium = getParameterByName('utm_medium', url);
    var campaign = getParameterByName('utm_campaign', url);
    var content = getParameterByName('utm_content', url);
    var term = getParameterByName('utm_term', url);
    var gclid = getParameterByName('gclid', url);

    if (jQuery('input[data-mapping=utm_source]')) {
        jQuery('input[data-mapping=utm_source]').attr('value', source);
        console.log("FIRED SOURCE");
    }
    else {
        console.log("NO SOURCE");
    }
    if (jQuery("input[data-mapping=utm_medium]")) {
        jQuery('input[data-mapping=utm_medium]').attr('value', source);
        console.log("FIRED MEDIUM");
    }
    else {
        console.log("NO MEDIUM");
    }
    if (jQuery('input[data-mapping=utm_campaign]')) {
        jQuery("input[data-mapping=utm_campaign]").attr('value', campaign);
        console.log("FIRED CAMPAIGN");
    }
    else {
        console.log("NO CAMPAIGN");
    }
    if (jQuery('input[data-mapping=utm_content]')) {
        jQuery('input[data-mapping=utm_content]').attr('value', source);
        console.log("FIRED CONTENT");
    }
    else {
        console.log("NO CONTENT");
    }
    if (jQuery('input[data-mapping=utm_term]')) {
        jQuery('input[data-mapping=utm_term]').attr('value', source);
        console.log("FIRED TERM");
    }
    else {
        console.log("NO TERM");
    }
    if (jQuery('input[data-mapping=gclid]')) {
        jQuery('input[data-mapping=gclid]').attr('value', source);
        console.log("FIRED GCLID");
    }
    else {
        console.log("NO GCLID");
    }
}

setTimeout(retreiveUTM(), 3000);

</script>
